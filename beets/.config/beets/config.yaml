directory: ~/music/beets
library: ~/music/beets/library.db
plugins: inline the info custom_album_tag kitchen_sink kodiupdate

original_date: yes
per_disc_numbering: yes

import:
    move: yes
    timid: yes
    quiet_fallback: asis

kodi:
    host: localhost
    port: 8080
    user: kodi
    pwd: kodi

musicbrainz:
    searchlimit: 25

match:
    preferred:
        original_year: yes

paths:
    default: "%the{$albumartist}/\
              \
              $year - $album\
              %if{$multidisc,,%if{$disctitle, ($disctitle)}}\
              %if{$albumdisambig, ($albumdisambig)}\
              %aunique{}\
              %if{$multidisc,,$format_string}/\
              \
              %if{$multidisc,Disc $disc%if{$disctitle, ($disctitle)}$format_string/}\
              \
              $track - $title"

    singleton: Non-Album/$artist/$title

    albumtype:soundtrack: Soundtracks/$album%aunique%ifdef{source, [$source]}/%if{$multidisc,Disc $disc/}$track - $artist - $title

    comp: Compilations/$album%aunique{}%ifdef{source, [$source]}/%if{$multidisc,Disc $disc/}$track - $artist - $title

aunique:
    keys: albumartist album
    disambiguators: albumtype year label catalognum albumdisambig releasegroupdisambig media
    bracket: '[]'

item_fields:
    multidisc: 1 if disctotal > 1 else 0

    format_string: |
        from beets.library import Item
        from beetsplug.custom_album_tag import format_string

        item = Item()
        item.media = media
        item.format = format
        item.samplerate = samplerate
        item.bitdepth = bitdepth
        item.channels = channels

        return format_string(item)

